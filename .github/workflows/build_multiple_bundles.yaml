name: Multiple Bundles Builder Workflow

on: push

jobs:
  run-github-actions:
    runs-on: ubuntu-latest
    steps:
      - name: clone the github repo
        uses: actions/checkout@v2
        with:
          repository: "tymscar/github-actions-test"

      - name: get a list of affected packages
        id: affected-packages
        run: cat command-output | python3 jsonParser.py

      - name: build cat package
        if: ${{ contains(steps.affected-packages.outputs.PACKAGES, 'package-viz-cat') }}
        run: echo "😺 built!"

      - name: build dog package
        if: ${{ contains(steps.affected-packages.outputs.PACKAGES, 'package-viz-dog') }}
        run: echo "🐶 built!"

      - name: build elephant package
        if: ${{ contains(steps.affected-packages.outputs.PACKAGES, 'package-viz-elephant') }}
        run: echo "🐘 built!"

      - name: build penguin package
        if: ${{ contains(steps.affected-packages.outputs.PACKAGES, 'package-viz-penguin') }}
        run: echo "🐧 built!"
