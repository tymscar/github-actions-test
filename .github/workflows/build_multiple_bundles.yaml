name: Multiple Bundles Builder Workflow

on: push

jobs:
  run-github-actions:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        package:
          [
            "package-viz-cat",
            "package-viz-dog",
            "package-viz-elephant",
            "package-viz-penguin",
          ]
    steps:
      - name: clone the github repo
        uses: actions/checkout@v2
        with:
          repository: "tymscar/github-actions-test"

      - name: get a list of affected packages
        id: affected-packages
        run: cat command-output | python3 jsonParser.py

      - name: build package
        if: ${{ contains(steps.affected-packages.outputs.PACKAGES, matrix.package) }}
        run: echo "${{ matrix.package }} built!"
